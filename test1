/**
 * Select a Material tab by its visible label.
 * Works with Angular Material MDC tabs (Angular 15+ / Material 15+).
 */
export function selectMatTabOnPage(pageName: string, tabLabel: string) {
  // Tabs are part of the page DOM (not in overlay), so scope under page-root
  cy.get(`[data-cy="page-root"][data-page-name="${pageName}"]`, { timeout: 30_000 })
    .should('be.visible')
    .within(() => {
      // robust selector: role="tab"
      cy.contains('[role="tab"]', tabLabel, { timeout: 10_000 })
        .should('be.visible')
        .click();

      // make sure it became selected
      cy.contains('[role="tab"]', tabLabel)
        .should('have.attr', 'aria-selected', 'true');
    });
}
